!function(H){var addEvent=H.addEvent;H.wrap(H.Chart.prototype,"init",function(proceed){function pointerDown(e){e=chart.pointer.normalize(e),downX=e.chartX,downY=e.chartY,optionsX=options.x,optionsY=options.y,currentX=legend.group.attr("translateX"),currentY=legend.group.attr("translateY"),isDragging=!0}function pointerMove(e){if(isDragging){e=chart.pointer.normalize(e);var draggedX=e.chartX-downX,draggedY=e.chartY-downY;e.preventDefault(),currentX+draggedX>0&&currentX+draggedX+legend.legendWidth<chart.chartWidth&&currentY+draggedY>0&&currentY+draggedY+legend.legendHeight<chart.chartHeight&&(options.x=optionsX+draggedX,options.y=optionsY+draggedY,legend.group.placed=!1,legend.group.align(H.extend({width:legend.legendWidth,height:legend.legendHeight},options),!0,"spacingBox"),legend.positionCheckboxes()),chart.pointer.selectionMarker&&(chart.pointer.selectionMarker=chart.pointer.selectionMarker.destroy())}}function pointerUp(){isDragging=!1}proceed.apply(this,Array.prototype.slice.call(arguments,1));var isDragging,downX,downY,optionsX,optionsY,currentX,currentY,chart=this,legend=chart.legend,title=legend.title,options=legend.options;options.draggable&&title&&(title.css({cursor:"move"}),addEvent(title.element,"mousedown",pointerDown),addEvent(chart.container,"mousemove",pointerMove),addEvent(document,"mouseup",pointerUp),addEvent(title.element,"touchstart",pointerDown),addEvent(chart.container,"touchmove",pointerMove),addEvent(document,"touchend",pointerUp))})}(Highcharts);
